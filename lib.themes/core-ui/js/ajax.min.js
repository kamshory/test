function ajaxLoad(t,e){$(".pb-container .progress-infinite").css({display:"block"}),t.load(e,function(e,a,n){"success"==a&&(t.empty().append(e),prepareDataPage(t),$(".pb-container .progress-infinite").css({display:"none"})),"error"==a&&(console.error("error"),$(".pb-container .progress-infinite").css({display:"none"}))}),updateOrderUrl(getSearch(e))}function prepareDataPage(t){createSortTable(),t.find('[data-ajax-support="true"] tbody.data-table-manual-sort').each(function(){let t=$(this)[0];Sortable.create(t,{animation:150,scroll:!0,handle:".data-sort-handler",onEnd:function(){updateNumber($(t))}})}),t.find("tbody.data-table-manual-sort").each(function(){let t=$(this)[0];Sortable.create(t,{animation:150,scroll:!0,handle:".data-sort-handler",onEnd:function(){updateNumber($(t))}})}),t.find("table").each(function(){$(".check-master").length>0&&$(".check-master").each(function(){$(this).on("change",function(){let t=$(this)[0].checked;$(this).closest("table").find(".check-slave").each(function(){$(this)[0].checked=t})})})})}function getSearch(t){return"?"+(splitWithTail(t,"?",1)[1]||"")}document.addEventListener("DOMContentLoaded",function(){if(createSortTable(),initDateTimePicker(),initMultipleSelect(),initSortData(window.location.search),$("table").each(function(){$(".check-master").length>0&&$(".check-master").each(function(){$(this).on("change",function(){let t=$(this)[0].checked,e=$(this).attr("data-selector");$(this).closest("table").find(".check-slave").filter(e).each(function(){$(this)[0].checked=t})})})}),0==$('[data-ajax-support="true"]').length&&$(document).on("click",'[type="submit"][name="user_action"][value="delete"]',function(t){confirm($(this).attr("data-onclik-message"))||(t.preventDefault(),t.stopPropagation())}),$('[data-ajax-support="true"]').length>0){let t=$('[data-ajax-support="true"]'),e;$(document).on("click",'[data-ajax-support="true"] .pagination a, [data-ajax-support="true"] .order-controll a',function(a){a.preventDefault(),a.stopPropagation(),e=$(this).attr("href"),ajaxLoad(t,e);let n=document.title;history.pushState({},n,e)}),window.addEventListener("popstate",function(a){a.state&&ajaxLoad(t,e=location.href)}),$(document).off("click",'[type="submit"][name="user_action"][value="delete"]'),$(document).on("click",'[data-ajax-support="true"] form.data-form [type="submit"]',function(a){if(a.preventDefault(),a.stopPropagation(),"delete"==$(this).attr("value")&&!confirm($(this).attr("data-onclik-message")))return!1;let n=$(this).closest("form");""==(e=n.attr("action"))&&(e=location.href);let r=n.serialize();r+="&"+$(this).attr("name")+"="+encodeURIComponent($(this).attr("value")),$(".pb-container .progress-infinite").css({display:"block"}),$.ajax({url:e,type:n.attr("method"),data:r,success:function(e){t.empty().append(e),prepareDataPage(t),$(".pb-container .progress-infinite").css({display:"none"})},error:function(t,e,a){console.error("Error: "+a),$(".pb-container .progress-infinite").css({display:"none"})}}),updateOrderUrl(getSearch(e))})}});