var chart,ctx;Chart.defaults.pointHitDetectionRadius=1,Chart.defaults.plugins.tooltip.enabled=!1,Chart.defaults.plugins.tooltip.mode="index",Chart.defaults.plugins.tooltip.position="nearest",Chart.defaults.plugins.tooltip.external=coreui.ChartJS.customTooltips,Chart.defaults.defaultFontColor=coreui.Utils.getStyle("--cui-body-color"),document.documentElement.addEventListener("ColorSchemeChange",()=>{cardChart1.data.datasets[0].pointBackgroundColor=coreui.Utils.getStyle("--cui-primary"),cardChart2.data.datasets[0].pointBackgroundColor=coreui.Utils.getStyle("--cui-info"),mainChart.options.scales.x.grid.color=coreui.Utils.getStyle("--cui-border-color-translucent"),mainChart.options.scales.x.ticks.color=coreui.Utils.getStyle("--cui-body-color"),mainChart.options.scales.y.border.color=coreui.Utils.getStyle("--cui-border-color-translucent"),mainChart.options.scales.y.grid.color=coreui.Utils.getStyle("--cui-border-color-translucent"),mainChart.options.scales.y.ticks.color=coreui.Utils.getStyle("--cui-body-color"),cardChart1.update(),cardChart2.update(),mainChart.update()});const random=(t,e)=>Math.floor(Math.random()*(e-t+1)+t);function createChart(t){ctx=document.getElementById("main-chart2").getContext("2d"),t.options.plugins.tooltip={callbacks:{label:function(t){let e;return` ${t.dataset.label}: ${t.raw.y.toFixed(2)}%`}}},t.options.plugins.legend.labels.generateLabels=function(t){let e=Chart.defaults.plugins.legend.labels.generateLabels(t);return e.forEach(t=>{t.text.length>10&&(t.text=t.text.substring(0,10)+"...")}),e},chart&&chart.destroy(),chart=new Chart(ctx,t)}document.addEventListener("DOMContentLoaded",function(){Chart.register({id:"moment",beforeInit:function(t){t.data.labels=t.data.labels.map(function(t){return moment(t).format("YYYY-MM-DD HH:mm:ss")})}}),document.querySelector("#proyek_id").addEventListener("change",function(t){""!=t.target.value&&fetch(urlBoq+"?proyek_id="+t.target.value,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(!t.ok)throw Error("Network response was not ok "+t.statusText);return t.json()}).then(t=>{createChart(t),document.querySelector("#min-date").innerHTML=t.minDate,document.querySelector("#max-date").innerHTML=t.maxDate}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)})});let t=[];$(".progres-proyek").each(function(){t.push("proyeks[]="+$(this).attr("data-proyek-id"))}),fetch(urlProgres+"?"+t.join("&"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(!t.ok)throw Error("Network response was not ok "+t.statusText);return t.json()}).then(t=>{let e={};for(let o in t){let r=t[o];r.options.plugins.tooltip={callbacks:{label:function(t){let e;return` ${t.dataset.label}: ${t.parsed.y.toFixed(2)}%`}}},chart&&chart.destroy(),e[o]=new Chart(document.getElementById("card-chart-"+o),r)}}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)})});